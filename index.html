<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Birkenhead Rolling Wheels â€“ Hagley Museum</title>
</head>

<body>

<h1>Birkenhead Rolling Wheels</h1>

<img src="test.jpg" width="600" alt="Birkenhead Rolling Wheels">

<script>
alert("QR script loaded");
</script>

<p>
This exhibit highlights the historical use of rolling wheels in the Birkenhead area and their role in early industrial processes.
</p>

<!-- ===== BACKGROUND ANALYTICS SCRIPT (INVISIBLE TO VISITORS) ===== -->
<script>
/* =========================
   CONFIGURATION
========================= */
<script>
const EXHIBIT_NAME = "Birkenhead Rolling Wheels";
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzm0wgH5Tdlz8KEGJcXRE4jif9Rxn_Ma3Vf_Dn-RhwMbKAT1LnZvLIs0uM1gts01k6rIQ/exec";
const WEATHER_API_KEY = "e23c0a18cd0744e940f5020207c57793";

function sendScan(weather) {
  fetch(SCRIPT_URL, {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      exhibit: EXHIBIT_NAME,
      weather: weather
    })
  })
  .then(() => console.log("Scan sent"))
  .catch(err => console.error("Scan failed", err));
}

function logScan() {
  if (!navigator.geolocation) {
    sendScan("Unknown");
    return;
  }

  navigator.geolocation.getCurrentPosition(
    pos => {
      const lat = pos.coords.latitude;
      const lon = pos.coords.longitude;

      fetch(
        `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${WEATHER_API_KEY}`
      )
        .then(res => res.json())
        .then(data => sendScan(data.weather[0].main))
        .catch(() => sendScan("Unavailable"));
    },
    () => sendScan("Permission Denied")
  );
}

logScan();
</script>

