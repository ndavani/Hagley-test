<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Birkenhead Rolling Wheels â€“ Hagley Museum</title>
</head>

<body>

<h1>Birkenhead Rolling Wheels</h1>

<img src="test.jpg" width="600" alt="Birkenhead Rolling Wheels">

<p>
This exhibit highlights the historical use of rolling wheels in the Birkenhead area and their role in early industrial processes.
</p>

<!-- ===== BACKGROUND ANALYTICS SCRIPT (INVISIBLE TO VISITORS) ===== -->
<script>
/* =========================
   CONFIGURATION
========================= */
const EXHIBIT_NAME = "Birkenhead Rolling Wheels";
const FORM_URL = "https://airtable.com/app8eYX3QqOqFLzjl/pag1YP6uWlkbXp13F/form";
const WEATHER_API_KEY = "e23c0a18cd0744e940f5020207c57793";

/* =========================
   SUBMIT VIA HIDDEN FORM
========================= */
function submitToAirtable(weatherCondition) {
  const form = document.createElement("form");
  form.method = "POST";
  form.action = FORM_URL;
  form.style.display = "none";

  const exhibitField = document.createElement("input");
  exhibitField.name = "Exhibit Name";
  exhibitField.value = EXHIBIT_NAME;

  const weatherField = document.createElement("input");
  weatherField.name = "Weather";
  weatherField.value = weatherCondition;

  form.appendChild(exhibitField);
  form.appendChild(weatherField);

  document.body.appendChild(form);
  form.submit();
}

/* =========================
   GET WEATHER + LOG SCAN
========================= */
function logScanWithWeather() {
  if (!navigator.geolocation) {
    submitToAirtable("Unknown");
    return;
  }

  navigator.geolocation.getCurrentPosition(
    (position) => {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;

      fetch(
        `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${WEATHER_API_KEY}`
      )
        .then(response => response.json())
        .then(data => {
          const weather = data.weather[0].main;
          submitToAirtable(weather);
        })
        .catch(() => submitToAirtable("Unavailable"));
    },
    () => submitToAirtable("Permission Denied")
  );
}

/* =========================
   RUN ON PAGE LOAD
========================= */
logScanWithWeather();
</script>
