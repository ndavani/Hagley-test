<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Birkenhead Rolling Wheels â€“ Hagley Museum</title>
</head>

<body>

<h1>Birkenhead Rolling Wheels</h1>

<img src="test.jpg" width="600" alt="Birkenhead Rolling Wheels">

<script>
alert("QR script loaded");
</script>

<p>
This exhibit highlights the historical use of rolling wheels in the Birkenhead area and their role in early industrial processes.
</p>

<script>

/* =========================
   CONFIGURATION
========================= */
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzm0wgH5Tdlz8KEGJcXRE4jif9Rxn_Ma3Vf_Dn-RhwMbKAT1LnZvLIs0uM1gts01k6rIQ/exec";
const EXHIBIT_NAME = "Birkenhead Rolling Wheels";
const WEATHER_API_KEY = "e23c0a18cd0744e940f5020207c57793";

/* =========================
   HAGLEY MUSEUM FIXED LOCATION
========================= */
const HAGLEY_LAT = 39.7496;
const HAGLEY_LON = -75.6206;

/* =========================
   SEND SCAN TO SERVER
========================= */
function sendScan(weatherType, temperature) {
  fetch(SCRIPT_URL, {
    mode: "cors",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      exhibit: EXHIBIT_NAME,
      weather: weatherType,
      temperature: temperature
    })
  });
}

/* =========================
   GET WEATHER FOR HAGLEY
========================= */
function logScan() {

  fetch(
    `https://api.openweathermap.org/data/2.5/weather?lat=${HAGLEY_LAT}&lon=${HAGLEY_LON}&units=imperial&appid=${WEATHER_API_KEY}`
  )
    .then(response => response.json())
    .then(data => {

      const weatherType = data.weather?.[0]?.description || "Unknown";
      const temperature = Math.round(data.main?.temp || 0);

      sendScan(weatherType, temperature);

    })
    .catch(() => sendScan("Unavailable", 0));
}

/* =========================
   RUN ON PAGE LOAD
========================= */
logScan();

</script>
</body>
</html>
